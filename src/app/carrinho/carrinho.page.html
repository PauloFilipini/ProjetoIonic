<ion-header>
  <ion-toolbar>
      <ion-buttons slot="start">
          <ion-back-button defaultHref="home"></ion-back-button>
        </ion-buttons>
    <ion-title>Finalizando Pedido</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
          <form [formGroup]="formulario"  (ngSubmit) = "confirmarCompra()">
            <ion-card>
                <div class="form-group">
                  <label class="control-label sr-only" for="inputSuccess"><i class="fa fa-check"></i> Endereço</label>
                  <input type="text" 
                  class="form-control"
                  placeholder="Endereço"
                  formControlName="endereco"
                    >
                    <small *ngIf="formulario.get('endereco').valid && formulario.get('endereco').touched" class="form-text text-success" >Endereco Valido</small>
                    <small *ngIf="formulario.get('endereco').invalid && formulario.get('endereco').touched" class="form-text text-danger">Endereço Invalido</small>
                </div>
              <div class="col-sm-2 col-xs-6">
                  <input type="text" 
                  class="form-control" 
                  placeholder="Número"
                  formControlName="numero"
                  >
                  <small *ngIf="formulario.get('numero').valid && formulario.get('numero').touched" class="form-text text-success" >Numero Valido</small>
                  <small  *ngIf="formulario.get('numero').invalid && formulario.get('numero').touched" class="form-text text-danger">Numero Invalido</small>             
              </div>
              <div class="col-sm-4 col-xs-6">           
                  <input type="text" 
                  class="form-control" 
                  placeholder="Complemento"
                  formControlName="complemento"
                  >                       
              </div>
            </ion-card>
            <ion-card>
            <div class="row">
              <div class="col-xs-12">
                <p class="lead">Itens do Pedido:</p>
              </div>
              <div class="col-xs-12 table-responsive">
                <table class="table table-striped">
                  <thead>
                    <tr>
                      <th class="text-center">Quantidade</th>
                      <th>Item</th>
                      <th>Descrição</th>
                      <th class="text-right">Subtotal</th>
                      <th class="text-right"></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let itens of itensCarrinho">
                      <td class="text-center">
                        <a class="btn btn-sm" (click)="diminuir(itens)"><i class="fa fa-minus"></i></a>
                        {{itens.quantidade}}
                        <a class="btn btn-sm" (click)="adicionar(itens)"><i class="fa fa-plus"></i></a>
                      </td>
                      <td>{{ itens.item }}</td>
                      <td>{{ itens.descricao }}</td>
                      <td class="text-right">{{ itens.subtotal | currency:'BRL' }}</td>
                      <td class="text-right">
                        <a class="btn btn-sm danger" (click)="remover(itens)"><i class="fa fa-remove"></i></a>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </ion-card>
          <ion-card>
                <p class="lead">Formas de Pagamento:</p>
                  <div class="form-group">
                    <div>
                      <label>
                        <div class="exemplo-radio">    <input type="radio" value="dinheiro" name="formaPagamento"  formControlName="formaPagamento"/>    
                          <label for="campo-radio1">Dinheiro</label>    
                          <input type="radio" value="debito" name="formaPagamento" formControlName="formaPagamento"/>    
                                   Debito                 
                          </div>
                      </label>
                      </div>
                      <small  *ngIf="formulario.get('formaPagamento').valid && formulario.get('formaPagamento').touched" class="form-text text-success">Forma de Pagamento valida</small>
                      <small  *ngIf="formulario.get('formaPagamento').invalid && formulario.get('formaPagamento').touched" class="form-text text-success">Forma de Pagamento Invalido</small>
                  </div>
                <p class="lead">Frete e Total:</p>
                  <table class="table">
                    <tbody><tr>
                      <th style="width:50%">Itens:</th>
                      <td class="text-right">{{ total| currency:'BRL' }}</td>
                    </tr>
                    <tr>
                      <th>Frete:</th>
                      <td class="text-right">R$ 0,00</td>
                    </tr>
                    <tr>
                      <th>Total:</th>
                      <td class="text-right">{{ total| currency:'BRL' }}</td>
                    </tr>
                  </tbody></table>
                </ion-card>
          <div class="row"  *ngIf="itensCarrinho.length === 0 || formulario.get('endereco').invalid  || formulario.get('numero').invalid || formulario.get('formaPagamento').invalid">
              <a class="btn btn-success pull-right" disabled><i class="fa fa-credit-card">
              </i> Concluir Pedido
              </a>      
          </div>
          <div class="row"  *ngIf="itensCarrinho.length !== 0 && formulario.get('endereco').valid && formulario.get('numero').valid && formulario.get('formaPagamento').valid">
              <button  type="submit" class="btn btn-success pull-right"><i class="fa fa-credit-card">
              </i> Concluir Pedido
            </button>
          </div>
        </form>
</ion-content>
